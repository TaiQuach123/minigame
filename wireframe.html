<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wireframe - C∆∞·ª°i ng·ª±a v√†ng - SƒÉn ng√†n l·ªôc</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", "Roboto", Arial, sans-serif;
        background: #f5f5f5;
        padding: 20px;
      }

      .container {
        max-width: 414px;
        margin: 0 auto;
        background: white;
        border-radius: 8px;
        padding: 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        position: relative;
        min-height: 100vh;
      }

      /* Screen 1: Entry/Landing Screen */
      .screen {
        display: none;
        padding: 20px;
        min-height: 100vh;
      }

      .screen.active {
        display: block;
      }

      /* Header */
      .header {
        text-align: center;
        padding: 20px 0;
        background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
        color: white;
        border-radius: 8px 8px 0 0;
        margin: -20px -20px 20px -20px;
      }

      .header h1 {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .header .subtitle {
        font-size: 14px;
        opacity: 0.9;
      }

      .close-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        font-size: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Hero Image */
      .hero-image {
        width: 100%;
        height: 200px;
        background: linear-gradient(135deg, #f6e05e 0%, #d69e2e 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 80px;
        margin-bottom: 20px;
        position: relative;
        overflow: hidden;
      }

      .hero-image::before {
        content: "üê¥";
        position: absolute;
        animation: bounce 2s infinite;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      /* Top Bar */
      .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        background: #f9f9f9;
        border-radius: 8px;
        margin-bottom: 15px;
      }

      .top-bar-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        font-weight: 500;
      }

      .top-bar-item .icon {
        font-size: 20px;
      }

      .badge {
        background: #e53e3e;
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: bold;
      }

      /* Map Area */
      .map-container {
        position: relative;
        width: 100%;
        height: 400px;
        background: #e0f2fe;
        border-radius: 12px;
        margin-bottom: 20px;
        overflow: hidden;
      }

      .vietnam-map {
        width: 100%;
        height: 100%;
        position: relative;
        background-image: url("assets/vietnam-map.png");
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
      }

      #province-markers {
        display: none;
      }

      #province-markers .province-marker {
        display: none;
      }

      .vietnam-outline {
        fill: rgba(255, 255, 255, 0.3);
        stroke: #fff;
        stroke-width: 2;
      }

      /* Tebbi Character */
      .tebbi-character {
        position: absolute;
        width: 50px;
        height: 50px;
        background: #f6e05e;
        border-radius: 50%;
        border: 3px solid #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        z-index: 100;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        top: 30%;
        left: 40%;
      }

      .tebbi-character.moving {
        animation: horseMove 0.8s ease-in-out;
      }

      @keyframes horseMove {
        0% {
          transform: translateY(0) scale(1);
        }
        25% {
          transform: translateY(-15px) scale(1.1);
        }
        50% {
          transform: translateY(-10px) scale(1.15);
        }
        75% {
          transform: translateY(-15px) scale(1.1);
        }
        100% {
          transform: translateY(0) scale(1);
        }
      }

      .tebbi-character.bounce {
        animation: horseBounce 0.5s ease;
      }

      @keyframes horseBounce {
        0%,
        100% {
          transform: translateY(0) scale(1);
        }
        50% {
          transform: translateY(-10px) scale(1.1);
        }
      }

      /* Province Markers */
      .province-marker {
        position: absolute;
        width: 16px;
        height: 16px;
        background: #9ca3af;
        border: 2px solid #6b7280;
        border-radius: 50%;
        cursor: pointer;
        transform: translate(-50%, -50%);
        transition: all 0.3s ease;
        z-index: 10;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      .province-marker:hover {
        transform: translate(-50%, -50%) scale(1.4);
        z-index: 11;
        background: #6b7280;
        border-color: #4b5563;
      }

      .province-marker.visited {
        background: #d1d5db;
        border-color: #9ca3af;
      }

      .province-marker.current {
        background: #e53e3e;
        border-color: #c53030;
        box-shadow: 0 0 15px rgba(229, 62, 62, 0.8);
        animation: pulse 2s infinite;
        width: 18px;
        height: 18px;
        z-index: 12;
      }

      .province-marker::after {
        content: attr(data-number);
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 8px;
        font-weight: bold;
        color: white;
        pointer-events: none;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
        line-height: 1;
      }

      .province-marker.current::after {
        color: white;
        font-size: 10px;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
          box-shadow: 0 0 15px rgba(229, 62, 62, 0.8);
        }
        50% {
          transform: translate(-50%, -50%) scale(1.3);
          box-shadow: 0 0 25px rgba(229, 62, 62, 1);
        }
      }

      .province-marker.visited::after {
        color: #4b5563;
      }

      /* Dice Area */
      .dice-area {
        text-align: center;
        padding: 20px;
        background: #f9f9f9;
        border-radius: 12px;
        margin-bottom: 15px;
      }

      .dice {
        width: 100px;
        height: 100px;
        background: white;
        border: 4px solid #e53e3e;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        margin: 0 auto 15px;
        cursor: pointer;
        transition: transform 0.2s;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .dice:hover {
        transform: scale(1.05);
      }

      .dice.rolling {
        animation: rollDiceAnimation 1.5s cubic-bezier(0.4, 0, 0.2, 1);
      }

      @keyframes rollDiceAnimation {
        0% {
          transform: rotate(0deg) scale(1);
        }
        10% {
          transform: rotate(90deg) scale(1.1);
        }
        20% {
          transform: rotate(180deg) scale(1);
        }
        30% {
          transform: rotate(270deg) scale(1.1);
        }
        40% {
          transform: rotate(360deg) scale(1);
        }
        50% {
          transform: rotate(450deg) scale(1.1);
        }
        60% {
          transform: rotate(540deg) scale(1);
        }
        70% {
          transform: rotate(630deg) scale(1.1);
        }
        80% {
          transform: rotate(720deg) scale(1);
        }
        90% {
          transform: rotate(810deg) scale(1.05);
        }
        100% {
          transform: rotate(900deg) scale(1);
        }
      }

      .dice-button {
        padding: 14px 32px;
        background: #e53e3e;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        width: 100%;
        transition: background 0.3s;
      }

      .dice-button:hover {
        background: #c53030;
      }

      .dice-button:disabled {
        background: #a0aec0;
        cursor: not-allowed;
      }

      /* Progress Text */
      .progress-text {
        text-align: center;
        font-size: 16px;
        color: #333;
        margin-bottom: 15px;
        font-weight: 500;
      }

      /* Buttons */
      .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        width: 100%;
        margin-bottom: 10px;
      }

      .btn-primary {
        background: #e53e3e;
        color: white;
      }

      .btn-primary:hover {
        background: #c53030;
      }

      .btn-secondary {
        background: white;
        color: #e53e3e;
        border: 2px solid #e53e3e;
      }

      .btn-secondary:hover {
        background: #f9f9f9;
      }

      /* Popup/Modal */
      .popup-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .popup-overlay.active {
        display: flex;
      }

      .popup {
        background: white;
        border-radius: 16px;
        padding: 24px;
        max-width: 350px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        animation: popupFadeIn 0.3s ease;
      }

      @keyframes popupFadeIn {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .popup-header {
        text-align: center;
        margin-bottom: 20px;
      }

      .popup-header h2 {
        font-size: 22px;
        color: #e53e3e;
        margin-bottom: 10px;
      }

      .popup-close {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #999;
      }

      /* Reward Popup */
      .reward-content {
        text-align: center;
        padding: 20px 0;
      }

      .reward-icon {
        font-size: 64px;
        margin-bottom: 15px;
      }

      .reward-amount {
        font-size: 32px;
        font-weight: bold;
        color: #e53e3e;
        margin-bottom: 10px;
      }

      .reward-text {
        font-size: 16px;
        color: #666;
        margin-bottom: 20px;
        line-height: 1.5;
      }

      .province-name {
        font-size: 18px;
        font-weight: bold;
        color: #333;
        margin-bottom: 15px;
      }

      /* Puzzle Popup */
      .puzzle-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin: 20px 0;
      }

      .puzzle-piece {
        aspect-ratio: 1;
        background: #f9f9f9;
        border: 3px solid #e53e3e;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 15px;
        text-align: center;
      }

      .puzzle-piece.collected {
        background: linear-gradient(135deg, #f6e05e 0%, #d69e2e 100%);
        border-color: #e53e3e;
      }

      .puzzle-piece-icon {
        font-size: 32px;
        margin-bottom: 8px;
      }

      .puzzle-piece-name {
        font-size: 12px;
        font-weight: bold;
        color: #333;
      }

      .puzzle-piece.missing {
        background: #e2e8f0;
        border-color: #cbd5e0;
        color: #999;
      }

      .puzzle-piece.missing .puzzle-piece-icon::before {
        content: "?";
        font-size: 48px;
      }

      /* Check-in Popup */
      .checkin-content {
        text-align: center;
        padding: 20px 0;
      }

      .checkin-icon {
        font-size: 64px;
        margin-bottom: 15px;
      }

      /* Completion Popup */
      .completion-content {
        text-align: center;
        padding: 20px 0;
      }

      .completion-icon {
        font-size: 80px;
        margin-bottom: 15px;
      }

      .completion-text {
        font-size: 18px;
        font-weight: bold;
        color: #e53e3e;
        margin-bottom: 20px;
        line-height: 1.5;
      }

      /* Rule Screen */
      .rule-content {
        padding: 20px 0;
      }

      .rule-item {
        display: flex;
        align-items: flex-start;
        gap: 15px;
        margin-bottom: 20px;
      }

      .rule-icon {
        font-size: 32px;
        flex-shrink: 0;
      }

      .rule-text {
        flex: 1;
        font-size: 16px;
        line-height: 1.6;
        color: #333;
      }

      /* Navigation */
      .nav-buttons {
        display: flex;
        gap: 10px;
        margin-top: 20px;
      }

      .nav-buttons .btn {
        flex: 1;
        margin: 0;
      }

      /* Screen Navigation */
      .screen-nav {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        gap: 10px;
        z-index: 999;
      }

      .screen-nav-btn {
        padding: 8px 12px;
        background: #e53e3e;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 12px;
        cursor: pointer;
      }

      .screen-nav-btn:hover {
        background: #c53030;
      }
    </style>
  </head>
  <body>
    <!-- Screen 1: Entry/Landing Screen -->
    <div class="container">
      <div class="screen active" id="screen1">
        <div class="header">
          <button class="close-btn" onclick="closeGame()">√ó</button>
          <h1>üê¥ C∆∞·ª°i ng·ª±a v√†ng</h1>
          <div class="subtitle">SƒÉn ng√†n l·ªôc</div>
        </div>

        <div class="hero-image"></div>

        <div style="text-align: center; padding: 0 20px; margin-bottom: 30px">
          <h2 style="font-size: 20px; color: #333; margin-bottom: 15px">
            Gieo x√∫c x·∫Øc, du xu√¢n 34 t·ªânh th√†nh, nh·∫≠n l·ªôc T·∫øt!
          </h2>
          <p style="font-size: 14px; color: #666; line-height: 1.6">
            C√πng Tebbi c∆∞·ª°i ng·ª±a v√†ng kh√°m ph√° Vi·ªát Nam, nh·∫≠n th∆∞·ªüng may m·∫Øn v√†
            thu th·∫≠p m·∫£nh gh√©p h√†nh tr√¨nh!
          </p>
        </div>

        <button class="btn btn-primary" onclick="showScreen('screen2-rule')">
          B·∫Øt ƒë·∫ßu ngay
        </button>
      </div>

      <!-- Screen 2: Rule Screen (Popup) -->
      <div class="popup-overlay" id="screen2-rule">
        <div class="popup">
          <button class="popup-close" onclick="closePopup('screen2-rule')">
            √ó
          </button>
          <div class="popup-header">
            <h2>üìã Lu·∫≠t ch∆°i</h2>
          </div>
          <div class="rule-content">
            <div class="rule-item">
              <div class="rule-icon">üé≤</div>
              <div class="rule-text">
                <strong>Gieo x√∫c x·∫Øc</strong> ƒë·ªÉ di chuy·ªÉn Tebbi qua 34 t·ªânh
                th√†nh Vi·ªát Nam
              </div>
            </div>
            <div class="rule-item">
              <div class="rule-icon">üéÅ</div>
              <div class="rule-text">
                <strong>M·ªói t·ªânh</strong> nh·∫≠n th∆∞·ªüng: ti·ªÅn, c√¢u ch√∫c T·∫øt, ho·∫∑c
                l∆∞·ª£t ch∆°i
              </div>
            </div>
            <div class="rule-item">
              <div class="rule-icon">üß©</div>
              <div class="rule-text">
                <strong>Ho√†n th√†nh v√≤ng</strong> nh·∫≠n m·∫£nh gh√©p, ƒë·ªß 4 m·∫£nh nh·∫≠n
                th∆∞·ªüng l·ªõn!
              </div>
            </div>
          </div>
          <button class="btn btn-primary" onclick="showScreen('screen2-game')">
            B·∫Øt ƒë·∫ßu ch∆°i
          </button>
        </div>
      </div>

      <!-- Screen 2: Game Screen -->
      <div class="screen" id="screen2-game">
        <div class="header">
          <button class="close-btn" onclick="closeGame()">√ó</button>
          <h1>üê¥ C∆∞·ª°i ng·ª±a v√†ng</h1>
        </div>

        <div class="top-bar">
          <div class="top-bar-item">
            <span class="icon">üé≤</span>
            <span>L∆∞·ª£t: <strong id="turns-count">3</strong></span>
          </div>
          <div
            class="top-bar-item"
            onclick="showPopup('checkin-popup')"
            style="cursor: pointer"
          >
            <span class="icon">‚úÖ</span>
            <span>ƒêi·ªÉm danh</span>
            <span class="badge">!</span>
          </div>
          <div
            class="top-bar-item"
            onclick="showPopup('puzzle-popup')"
            style="cursor: pointer"
          >
            <span class="icon">üß©</span>
            <span id="puzzle-count">0/4</span>
          </div>
        </div>

        <div class="map-container">
          <div class="vietnam-map">
            <div class="tebbi-character" id="tebbi">üê¥</div>
            <div
              id="province-markers"
              style="
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
              "
            ></div>
          </div>
        </div>

        <div class="progress-text">
          ƒê√£ ƒëi: <strong id="progress-count">0</strong>/34 t·ªânh
        </div>

        <div class="dice-area">
          <div class="dice" id="dice" onclick="rollDice()">üé≤</div>
          <button class="dice-button" id="dice-btn" onclick="rollDice()">
            Gieo x√∫c x·∫Øc
          </button>
        </div>
      </div>

      <!-- Screen 3: Reward Popup -->
      <div class="popup-overlay" id="reward-popup">
        <div class="popup">
          <div class="popup-header">
            <h2>üéÅ Nh·∫≠n l·ªôc!</h2>
          </div>
          <div class="reward-content">
            <div class="province-name" id="reward-province">H√† N·ªôi</div>
            <div class="reward-icon" id="reward-icon">üí∞</div>
            <div class="reward-amount" id="reward-amount">5,000ƒë</div>
            <div class="reward-text" id="reward-text">
              Ho√†n ti·ªÅn v√†o v√≠ th∆∞·ªüng<br />
              Ch√∫c b·∫°n nƒÉm m·ªõi an khang th·ªãnh v∆∞·ª£ng!
            </div>
          </div>
          <button class="btn btn-primary" onclick="closePopup('reward-popup')">
            Ti·∫øp t·ª•c
          </button>
        </div>
      </div>

      <!-- Screen 4: Puzzle Popup -->
      <div class="popup-overlay" id="puzzle-popup">
        <div class="popup">
          <button class="popup-close" onclick="closePopup('puzzle-popup')">
            √ó
          </button>
          <div class="popup-header">
            <h2>üß© M·∫£nh gh√©p h√†nh tr√¨nh</h2>
          </div>
          <div class="puzzle-grid">
            <div class="puzzle-piece collected">
              <div class="puzzle-piece-icon">‚ùÑÔ∏è</div>
              <div class="puzzle-piece-name">Xu√¢n B·∫Øc</div>
            </div>
            <div class="puzzle-piece missing">
              <div class="puzzle-piece-icon"></div>
              <div class="puzzle-piece-name">Xu√¢n Trung</div>
            </div>
            <div class="puzzle-piece missing">
              <div class="puzzle-piece-icon"></div>
              <div class="puzzle-piece-name">Xu√¢n Nam</div>
            </div>
            <div class="puzzle-piece missing">
              <div class="puzzle-piece-icon"></div>
              <div class="puzzle-piece-name">Xu√¢n Bi·ªÉn ƒë·∫£o</div>
            </div>
          </div>
          <div style="text-align: center; margin-top: 15px">
            <p style="font-size: 14px; color: #666">
              B·∫°n ƒë√£ c√≥ <strong>1/4</strong> m·∫£nh gh√©p
            </p>
            <p style="font-size: 12px; color: #999; margin-top: 5px">
              Ho√†n th√†nh ƒë·ªß 4 m·∫£nh ƒë·ªÉ nh·∫≠n th∆∞·ªüng l·ªõn!
            </p>
          </div>
          <button class="btn btn-primary" onclick="closePopup('puzzle-popup')">
            Ti·∫øp t·ª•c
          </button>
        </div>
      </div>

      <!-- Screen 5: Check-in Popup -->
      <div class="popup-overlay" id="checkin-popup">
        <div class="popup">
          <button class="popup-close" onclick="closePopup('checkin-popup')">
            √ó
          </button>
          <div class="popup-header">
            <h2>‚úÖ ƒêi·ªÉm danh nh·∫≠n l·ªôc</h2>
          </div>
          <div class="checkin-content">
            <div class="checkin-icon">üìÖ</div>
            <p style="font-size: 16px; color: #333; margin-bottom: 20px">
              ƒêi·ªÉm danh h√¥m nay ƒë·ªÉ nh·∫≠n
              <strong style="color: #e53e3e">+1 l∆∞·ª£t ch∆°i</strong>!
            </p>
            <button class="btn btn-primary" onclick="checkIn()">
              ƒêi·ªÉm danh ngay
            </button>
          </div>
        </div>
      </div>

      <!-- Screen 5: Completion Popup -->
      <div class="popup-overlay" id="completion-popup">
        <div class="popup">
          <div class="popup-header">
            <h2>üéâ Ch√∫c m·ª´ng!</h2>
          </div>
          <div class="completion-content">
            <div class="completion-icon">üèÜ</div>
            <div class="completion-text">
              Tebbi ƒë√£ ho√†n th√†nh H√†nh Tr√¨nh Du Xu√¢n Vi·ªát Nam - C∆∞·ª°i ng·ª±a v√†ng
              sƒÉn ng√†n l·ªôc!
            </div>
            <div class="puzzle-grid" style="margin: 20px 0">
              <div class="puzzle-piece collected">
                <div class="puzzle-piece-icon">‚ùÑÔ∏è</div>
                <div class="puzzle-piece-name">Xu√¢n B·∫Øc</div>
              </div>
              <div class="puzzle-piece collected">
                <div class="puzzle-piece-icon">üå∫</div>
                <div class="puzzle-piece-name">Xu√¢n Trung</div>
              </div>
              <div class="puzzle-piece collected">
                <div class="puzzle-piece-icon">üå¥</div>
                <div class="puzzle-piece-name">Xu√¢n Nam</div>
              </div>
              <div class="puzzle-piece collected">
                <div class="puzzle-piece-icon">üèùÔ∏è</div>
                <div class="puzzle-piece-name">Xu√¢n Bi·ªÉn ƒë·∫£o</div>
              </div>
            </div>
            <div class="reward-content">
              <div class="reward-icon">üí∞</div>
              <div class="reward-amount">100,000ƒë</div>
              <div class="reward-text">Ho√†n ti·ªÅn v√†o v√≠ th∆∞·ªüng</div>
            </div>
            <button
              class="btn btn-primary"
              onclick="closePopup('completion-popup')"
            >
              Nh·∫≠n th∆∞·ªüng v√† ch∆°i ti·∫øp
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Screen Navigation (for demo) -->
    <div class="screen-nav">
      <button class="screen-nav-btn" onclick="showScreen('screen1')">1</button>
      <button class="screen-nav-btn" onclick="showScreen('screen2-game')">
        2
      </button>
      <button class="screen-nav-btn" onclick="showPopup('reward-popup')">
        3
      </button>
      <button class="screen-nav-btn" onclick="showPopup('puzzle-popup')">
        4
      </button>
      <button class="screen-nav-btn" onclick="showPopup('checkin-popup')">
        5
      </button>
      <button class="screen-nav-btn" onclick="showPopup('completion-popup')">
        6
      </button>
    </div>

    <script>
      let currentTurns = 3;
      let currentProgress = 0;
      let puzzleCount = 0;
      let currentProvinceIndex = 0;

      // 34 t·ªânh th√†nh Vi·ªát Nam theo th·ª© t·ª± t·ª´ B·∫Øc xu·ªëng Nam
      // V·ªã tr√≠ ƒë∆∞·ª£c ƒëi·ªÅu ch·ªânh ƒë·ªÉ ph√π h·ª£p v·ªõi h√¨nh ·∫£nh b·∫£n ƒë·ªì Vi·ªát Nam
      const provinces = [
        { name: "H√† N·ªôi", x: 45, y: 12 },
        { name: "H·∫£i Ph√≤ng", x: 50, y: 10 },
        { name: "Qu·∫£ng Ninh", x: 55, y: 8 },
        { name: "B·∫Øc Giang", x: 48, y: 15 },
        { name: "B·∫Øc Ninh", x: 46, y: 14 },
        { name: "H·∫£i D∆∞∆°ng", x: 50, y: 16 },
        { name: "H∆∞ng Y√™n", x: 46, y: 18 },
        { name: "Th√°i B√¨nh", x: 48, y: 20 },
        { name: "H√† Nam", x: 44, y: 22 },
        { name: "Nam ƒê·ªãnh", x: 46, y: 24 },
        { name: "Ninh B√¨nh", x: 44, y: 26 },
        { name: "Thanh H√≥a", x: 42, y: 30 },
        { name: "Ngh·ªá An", x: 40, y: 35 },
        { name: "H√† Tƒ©nh", x: 38, y: 38 },
        { name: "Qu·∫£ng B√¨nh", x: 36, y: 42 },
        { name: "Qu·∫£ng Tr·ªã", x: 34, y: 45 },
        { name: "Th·ª´a Thi√™n Hu·∫ø", x: 32, y: 48 },
        { name: "ƒê√† N·∫µng", x: 30, y: 52 },
        { name: "Qu·∫£ng Nam", x: 28, y: 55 },
        { name: "Qu·∫£ng Ng√£i", x: 26, y: 58 },
        { name: "B√¨nh ƒê·ªãnh", x: 24, y: 62 },
        { name: "Ph√∫ Y√™n", x: 22, y: 65 },
        { name: "Kh√°nh H√≤a", x: 20, y: 68 },
        { name: "Ninh Thu·∫≠n", x: 18, y: 72 },
        { name: "B√¨nh Thu·∫≠n", x: 16, y: 75 },
        { name: "B√† R·ªãa - V≈©ng T√†u", x: 14, y: 78 },
        { name: "ƒê·ªìng Nai", x: 12, y: 82 },
        { name: "B√¨nh D∆∞∆°ng", x: 10, y: 85 },
        { name: "T√¢y Ninh", x: 8, y: 88 },
        { name: "B√¨nh Ph∆∞·ªõc", x: 6, y: 90 },
        { name: "TP. H·ªì Ch√≠ Minh", x: 10, y: 92 },
        { name: "Long An", x: 8, y: 94 },
        { name: "Ti·ªÅn Giang", x: 6, y: 96 },
        { name: "C·∫ßn Th∆°", x: 4, y: 98 },
      ];

      // Initialize province markers - Disabled for simplicity
      function initProvinceMarkers() {
        // Markers are hidden for simplicity
        updateTebbiPosition();
      }

      function updateProvinceMarkers() {
        // Markers are hidden, no update needed
      }

      function updateTebbiPosition() {
        const tebbi = document.getElementById("tebbi");
        const mapContainer = document.querySelector(".map-container");
        const mapRect = mapContainer.getBoundingClientRect();
        const mapWidth = mapRect.width;
        const mapHeight = mapRect.height;

        if (currentProvinceIndex < provinces.length) {
          const province = provinces[currentProvinceIndex];
          const left = (province.x / 100) * mapWidth;
          const top = (province.y / 100) * mapHeight;

          tebbi.style.left = left - 25 + "px";
          tebbi.style.top = top - 25 + "px";
        }
      }

      function showScreen(screenId) {
        // Hide all screens
        document.querySelectorAll(".screen").forEach((screen) => {
          screen.classList.remove("active");
        });

        // Show target screen
        const targetScreen = document.getElementById(screenId);
        if (targetScreen) {
          targetScreen.classList.add("active");

          // Initialize when game screen is shown
          if (screenId === "screen2-game") {
            // Wait for screen to be fully rendered
            setTimeout(() => {
              initProvinceMarkers();
            }, 200);
          }
        }

        // Close all popups
        document.querySelectorAll(".popup-overlay").forEach((popup) => {
          popup.classList.remove("active");
        });
      }

      function showPopup(popupId) {
        const popup = document.getElementById(popupId);
        if (popup) {
          popup.classList.add("active");
        }
      }

      function closePopup(popupId) {
        const popup = document.getElementById(popupId);
        if (popup) {
          popup.classList.remove("active");
        }
      }

      function closeGame() {
        if (confirm("B·∫°n c√≥ mu·ªën tho√°t minigame kh√¥ng?")) {
          // In real app, this would navigate back
          alert("ƒê√£ tho√°t minigame");
        }
      }

      function rollDice() {
        if (currentTurns <= 0) {
          alert("B·∫°n ƒë√£ h·∫øt l∆∞·ª£t! Vui l√≤ng ƒëi·ªÉm danh ƒë·ªÉ nh·∫≠n th√™m l∆∞·ª£t.");
          showPopup("checkin-popup");
          return;
        }

        const dice = document.getElementById("dice");
        const diceBtn = document.getElementById("dice-btn");

        // Disable button during roll
        diceBtn.disabled = true;
        dice.classList.add("rolling");

        // Show random numbers while rolling
        let rollInterval = setInterval(() => {
          const randomNum = Math.floor(Math.random() * 6) + 1;
          dice.textContent = randomNum;
        }, 100);

        // Simulate dice roll with animation
        setTimeout(() => {
          clearInterval(rollInterval);
          const result = Math.floor(Math.random() * 6) + 1;
          dice.textContent = result;
          dice.classList.remove("rolling");

          // Update turns
          currentTurns--;
          document.getElementById("turns-count").textContent = currentTurns;

          // Move Tebbi to new provinces
          moveTebbi(result);

          diceBtn.disabled = false;
        }, 1500);
      }

      function moveTebbi(steps) {
        const tebbi = document.getElementById("tebbi");
        const startIndex = currentProvinceIndex;
        const endIndex = Math.min(
          currentProvinceIndex + steps,
          provinces.length - 1,
        );

        // Add moving animation
        tebbi.classList.add("moving");

        // Animate through each province
        let stepIndex = startIndex;
        const moveStep = () => {
          if (stepIndex <= endIndex) {
            currentProvinceIndex = stepIndex;
            updateTebbiPosition();
            updateProvinceMarkers();

            // Add bounce effect when landing
            if (stepIndex === endIndex) {
              setTimeout(() => {
                tebbi.classList.remove("moving");
                tebbi.classList.add("bounce");
                setTimeout(() => {
                  tebbi.classList.remove("bounce");
                }, 500);
              }, 200);
            }

            stepIndex++;
            if (stepIndex <= endIndex) {
              setTimeout(moveStep, 300);
            } else {
              // Update progress
              currentProgress = Math.min(currentProgress + steps, 34);
              document.getElementById("progress-count").textContent =
                currentProgress;

              // Show reward popup
              setTimeout(() => {
                showRewardPopup(steps);
              }, 500);
            }
          }
        };

        moveStep();
      }

      function showRewardPopup(diceResult) {
        const currentProvince = provinces[currentProvinceIndex];
        const rewards = [
          {
            type: "money",
            icon: "üí∞",
            amount: "2,000ƒë",
            text: "Ho√†n ti·ªÅn v√†o v√≠ th∆∞·ªüng\nCh√∫c b·∫°n nƒÉm m·ªõi an khang th·ªãnh v∆∞·ª£ng!",
          },
          {
            type: "money",
            icon: "üí∞",
            amount: "5,000ƒë",
            text: "Ho√†n ti·ªÅn v√†o v√≠ th∆∞·ªüng\nCh√∫c b·∫°n nƒÉm m·ªõi an khang th·ªãnh v∆∞·ª£ng!",
          },
          {
            type: "money",
            icon: "üí∞",
            amount: "10,000ƒë",
            text: "Ho√†n ti·ªÅn v√†o v√≠ th∆∞·ªüng\nCh√∫c b·∫°n nƒÉm m·ªõi an khang th·ªãnh v∆∞·ª£ng!",
          },
          {
            type: "wish",
            icon: "üéä",
            amount: "",
            text: "An khang th·ªãnh v∆∞·ª£ng\nV·∫°n s·ª± nh∆∞ √Ω\nT·∫•n t√†i t·∫•n l·ªôc!",
          },
          {
            type: "turns",
            icon: "üéÅ",
            amount: "+1 l∆∞·ª£t",
            text: "Ch√∫c b·∫°n may m·∫Øn trong h√†nh tr√¨nh ti·∫øp theo!",
          },
        ];

        const reward = rewards[Math.floor(Math.random() * rewards.length)];

        document.getElementById("reward-province").textContent = currentProvince
          ? currentProvince.name
          : "Vi·ªát Nam";
        document.getElementById("reward-icon").textContent = reward.icon;
        document.getElementById("reward-amount").textContent = reward.amount;
        document.getElementById("reward-text").textContent = reward.text;

        if (reward.type === "turns") {
          currentTurns += parseInt(reward.amount);
          document.getElementById("turns-count").textContent = currentTurns;
        }

        // Check if completed round
        if (currentProgress >= 34) {
          currentProgress = 0;
          currentProvinceIndex = 0;
          puzzleCount = Math.min(puzzleCount + 1, 4);
          document.getElementById("puzzle-count").textContent =
            puzzleCount + "/4";

          if (puzzleCount === 4) {
            setTimeout(() => {
              showPopup("completion-popup");
            }, 1000);
          } else {
            setTimeout(() => {
              showPopup("puzzle-popup");
            }, 1000);
          }
        }

        showPopup("reward-popup");
      }

      function checkIn() {
        currentTurns++;
        document.getElementById("turns-count").textContent = currentTurns;
        alert("ƒê√£ ƒëi·ªÉm danh! B·∫°n nh·∫≠n ƒë∆∞·ª£c +1 l∆∞·ª£t ch∆°i.");
        closePopup("checkin-popup");
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", () => {
        // Check if game screen is already active
        const gameScreen = document.getElementById("screen2-game");
        if (gameScreen && gameScreen.classList.contains("active")) {
          setTimeout(() => {
            initProvinceMarkers();
          }, 300);
        }

        // Update on window resize
        let resizeTimeout;
        window.addEventListener("resize", () => {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(() => {
            updateTebbiPosition();
          }, 200);
        });
      });
    </script>
  </body>
</html>
